<html>
<head>
</head>
<body>
<script type="text/javascript">
function run(code, url, params) {
  /* build the framework script */
  var framework = document.createElement("script");
  try {
    framework.appendChild( document.createTextNode(params) );
  }
  catch(e) {
    framework.text = params;  // IE will fail with appendChild, so fall back
  }
  framework.type = "text/javascript";
  framework.src = url;

  // $.append() produces a weird behavior where inline <script> was appended the the end
  //$("body").append(body);

  // document.write() can result in document.body === null
  //document.write(body);

  document.body.innerHTML = code;
  document.body.appendChild(framework);
}
</script>
</body>
</html>